---
/**
 * CompactTipCard Component
 * Inline card for crime detail pages. Max 3 per page.
 */

import type { CollectionEntry } from 'astro:content';
import { buildRoute } from '../config/routes';

interface Props {
  tip: CollectionEntry<'tips'>;
}

const { tip } = Astro.props;
const { data } = tip;

const severityDot: Record<string, string> = {
  high:   'bg-rose-500',
  medium: 'bg-amber-400',
  low:    'bg-emerald-500',
};
---

<div class="flex items-start gap-2.5 py-2.5 border-b border-slate-100 dark:border-[hsl(0_0%_14%)] last:border-b-0">
  <span
    class={`flex-shrink-0 mt-1.5 w-2 h-2 rounded-full ${severityDot[data.severity]}`}
    title={`${data.severity} severity`}
  ></span>
  <div class="flex-1 min-w-0">
    <div class="flex flex-wrap items-baseline gap-1.5 mb-0.5">
      <span class="text-caption font-bold text-slate-800 dark:text-[hsl(0_0%_90%)] leading-snug">
        {data.title}
      </span>
      <span class="text-caption font-bold px-1.5 py-0.5 rounded bg-rose-50 dark:bg-rose-950/50 text-rose-600 dark:text-rose-400 flex-shrink-0">
        {data.category}
      </span>
    </div>
    <a
      href={buildRoute.safetyTip(tip.slug)}
      class="text-caption font-bold text-rose-600 dark:text-rose-400 hover:underline"
    >
      Read tip â†’
    </a>
  </div>
</div>
