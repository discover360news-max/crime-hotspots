---
/**
 * Hero Component
 * Full-width gradient hero section for landing pages and authority pages
 * Pattern: DESIGN-TOKENS.md v1.1 - Hero Sections
 *
 * Usage:
 * <Hero
 *   title="Page Title"
 *   subtitle="Supporting description"
 *   badge="Optional badge text"
 *   primaryCTA={{ text: "Primary Action", href: "/path", icon: "dashboard" }}
 *   secondaryCTA={{ text: "Secondary Action", href: "/path", icon: "download" }}
 * />
 */

interface CTA {
  text: string;
  href: string;
  icon?: 'dashboard' | 'download' | 'arrow' | 'external';
  target?: '_blank' | '_self';
  rel?: string;
}

interface RiskBadge {
  level: 'high' | 'neutral' | 'low';
  label: string;
}

interface Props {
  title: string;
  subtitle: string;
  badge?: string;
  riskBadge?: RiskBadge;
  freshness?: string;
  primaryCTA?: CTA;
  secondaryCTA?: CTA;
  compact?: boolean;
  narrowContainer?: boolean;
}

const { title, subtitle, badge, riskBadge, freshness, primaryCTA, secondaryCTA, compact = false, narrowContainer = false } = Astro.props;

const riskPillStyles = {
  high:    'bg-rose-100 dark:bg-rose-950/60 text-rose-700 dark:text-rose-400 border border-rose-200 dark:border-rose-800/60',
  neutral: 'bg-slate-100 dark:bg-[hsl(0_0%_12%)] text-slate-600 dark:text-[hsl(0_0%_60%)] border border-slate-200 dark:border-[hsl(0_0%_20%)]',
  low:     'bg-emerald-100 dark:bg-emerald-950/60 text-emerald-700 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-800/60',
};

// Icon SVG paths
const icons = {
  dashboard: 'M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z',
  download: 'M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4',
  arrow: 'M19 9l-7 7-7-7',
  external: 'M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14'
};
---

<section class={`w-full bg-gradient-to-br from-rose-50 via-white to-slate-50 dark:from-rose-950/30 dark:via-[hsl(0_0%_5%)] dark:to-[hsl(0_0%_5%)] ${narrowContainer ? '' : 'px-4 sm:px-6 lg:px-8'} ${compact ? 'py-6 sm:py-8' : 'py-12 sm:py-20'}`}>
  <div class={`mx-auto ${compact ? (narrowContainer ? 'max-w-3xl px-4 sm:px-6' : 'max-w-6xl') : 'max-w-4xl text-center'}`}>
    <slot name="before" />
    <!-- Main Headline -->
    <h1 class={`font-bold text-slate-800 dark:text-[hsl(0_0%_95%)] ${compact ? 'text-heading leading-snug mb-2' : 'text-display leading-tight mb-4 sm:mb-6'}`}>
      {title}
    </h1>

    <!-- Risk level pill (area pages only) -->
    {riskBadge && (
      <span class={`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-lg text-xs font-semibold uppercase tracking-wide mb-3 ${riskPillStyles[riskBadge.level]}`}>
        {riskBadge.level === 'high' && (
          <svg class="w-3 h-3 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 9v2m0 4h.01M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z" />
          </svg>
        )}
        {riskBadge.level === 'low' && (
          <svg class="w-3 h-3 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
          </svg>
        )}
        {riskBadge.label}
      </span>
    )}

    <!-- Subheadline -->
    <p class={`text-body text-slate-400 dark:text-[hsl(0_0%_50%)] leading-relaxed ${compact ? 'mb-4 max-w-2xl' : 'mb-6 max-w-3xl mx-auto'}`}>
      {subtitle}
    </p>

    <!-- Optional Badge (e.g., "Updated daily â€¢ Last updated: Jan 24") -->
    {badge && (
      <p class="text-caption text-slate-400 dark:text-[hsl(0_0%_60%)] mb-4">
        {badge}
      </p>
    )}

    <!-- Data freshness indicator (optional) -->
    {freshness && (
      <p class="text-xs text-slate-400 dark:text-[hsl(0_0%_50%)] flex items-center gap-1 mb-3">
        <svg class="w-3 h-3 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        {freshness}
      </p>
    )}

    <!-- CTAs -->
    <div class={`flex gap-4 items-center ${compact ? 'flex-row flex-wrap' : 'flex-col sm:flex-row justify-center'}`}>
      {primaryCTA && (
        <a
          href={primaryCTA.href}
          target={primaryCTA.target}
          rel={primaryCTA.rel}
          class={`inline-flex items-center gap-2 rounded-lg bg-rose-600 text-white hover:bg-rose-700 active:bg-rose-800 transition font-medium shadow-lg hover:shadow-xl ${compact ? 'px-4 py-1.5 text-xs min-h-[22px]' : 'px-6 py-3 text-sm min-h-[44px]'}`}
        >
          {primaryCTA.text}
          {primaryCTA.icon && (
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={icons[primaryCTA.icon]} />
            </svg>
          )}
        </a>
      )}

      {secondaryCTA && (
        <a
          href={secondaryCTA.href}
          target={secondaryCTA.target}
          rel={secondaryCTA.rel}
          class={`inline-flex items-center gap-2 rounded-lg border-2 border-slate-300 dark:border-[hsl(0_0%_30%)] text-slate-700 dark:text-[hsl(0_0%_85%)] hover:border-rose-600 dark:hover:border-rose-500 hover:text-rose-600 dark:hover:text-rose-400 active:bg-rose-50 dark:active:bg-rose-950/40 transition font-medium ${compact ? 'px-4 py-1.5 text-xs min-h-[22px]' : 'px-6 py-3 text-sm min-h-[44px]'}`}
        >
          {secondaryCTA.text}
          {secondaryCTA.icon && (
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={icons[secondaryCTA.icon]} />
            </svg>
          )}
        </a>
      )}

      <!-- Slot for custom actions (e.g., JS buttons) -->
      <slot />
    </div>
  </div>
</section>
